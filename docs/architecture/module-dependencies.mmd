%% Module Dependencies — Import/dependency graph
%% Auto-generated by scripts/gen_arch_deps.py on 2026-02-12
%% Do not edit manually — changes will be overwritten on next commit

graph LR
    %% Modules
    MOD_collect["collect_market_data.py"]:::module
    MOD_ibkrClient["src/broker/ibkr_client.py"]:::module
    MOD_strategy["strategy_calculator_simple.py"]:::module
    TEST_consistency["tests/test_worst_case_consistency.py"]:::function
    TEST_lockstep["tests/test_worst_case_lockstep.py"]:::function
    TEST_pnl["tests/test_pnl_calculations.py"]:::function

    %% Discovered modules (not in standard map)
    MOD_pricing["src/pricing.py"]:::module
    MOD_pnl["src/pnl.py"]:::module

    %% External libraries
    LIB_asyncio["asyncio"]:::external
    LIB_ibAsync["ib_async / ib_insync"]:::external
    LIB_numpy["numpy"]:::external
    LIB_pandas["pandas"]:::external
    LIB_plotly["plotly"]:::external
    LIB_streamlit["streamlit"]:::external

    %% Module → Module imports
    MOD_collect -->|"imports"| MOD_ibkrClient
    MOD_strategy -->|"imports"| MOD_ibkrClient

    %% Module → Library imports
    MOD_collect --> LIB_asyncio
    MOD_collect --> LIB_ibAsync
    MOD_collect --> LIB_pandas
    MOD_ibkrClient --> LIB_asyncio
    MOD_ibkrClient --> LIB_ibAsync
    MOD_strategy --> LIB_asyncio
    MOD_strategy --> LIB_ibAsync
    MOD_strategy --> LIB_numpy
    MOD_strategy --> LIB_pandas
    MOD_strategy --> LIB_plotly
    MOD_strategy --> LIB_streamlit

    %% Test → Module dependencies (dashed)
    TEST_consistency -.->|"imports"| LIB_numpy
    TEST_consistency -.->|"imports"| LIB_pandas
    TEST_lockstep -.->|"imports"| LIB_numpy

    %% Style definitions
    classDef external  fill:#f9d0d0,stroke:#c0392b,color:#333
    classDef module    fill:#d0e0f9,stroke:#2471a3,color:#333
    classDef function  fill:#d0f9d0,stroke:#27ae60,color:#333
    classDef data      fill:#f9e4d0,stroke:#e67e22,color:#333
    classDef tab       fill:#e0d0f9,stroke:#8e44ad,color:#333
